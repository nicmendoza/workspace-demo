(this["webpackJsonpnotably-demo"]=this["webpackJsonpnotably-demo"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(15),o=n.n(r),i=(n(49),n(50),n(0));var l=n(10),d=n(9),s=n(11),u=n(12),b=n(21),j=Object(b.b)({name:"board",initialState:{notes:[]},reducers:{addNote:function(e,t){var n=(t.payload.length?t.payload:[t.payload]).map((function(t,n,a){return Object(l.a)({id:e.notes.length+n},t)}));e.notes=e.notes.concat(n)},removeNote:function(e,t){e.notes.splice(e.notes.indexOf(t.payload))},setNotes:function(e,t){e.notes=t.payload},updateNote:function(e,t){var n=t.payload,a=[].slice.call(e.notes).filter((function(e){return e.id===n.id}))[0];a&&Object.assign(a,n)}}}),f=j.actions,h=f.addNote,x=f.removeNote,O=(f.setNotes,f.updateNote),g=function(e){return e.board.notes},v=j.reducer;var p=function(){var e=Object(u.c)(g),t=Object(u.b)(),n=Object(a.useRef)(null),c=Object(a.useState)(100),r=Object(d.a)(c,2),o=r[0],b=r[1],j=Object(a.useState)(100),f=Object(d.a)(j,2),x=f[0],v=f[1],p=Object(a.useState)(0),m=Object(d.a)(p,2),w=m[0],y=m[1],N=Object(a.useState)(0),k=Object(d.a)(N,2),S=k[0],D=k[1],C=Object(a.useState)(!1),z=Object(d.a)(C,2),E=z[0],R=z[1],F=Object(a.useState)(""),I=Object(d.a)(F,2),B=I[0],L=I[1],V=["Double click me on the canvas","Or double click me on the table view \ud83d\udc48","New Note"],W=Object(a.useState)(0===e.length?V[0]:V.slice(-1)),A=Object(d.a)(W,2),H=A[0],T=A[1];Object(a.useEffect)((function(){function e(){b(n.current.parentNode.clientHeight),v(n.current.parentNode.clientWidth);var e=n.current.getBoundingClientRect();y(e.top),D(e.left)}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[o,x]);var J=function(e,n){var a=n.currentTarget.attrs,c=a.x,r=a.y;t(O(Object(l.a)(Object(l.a)({},e),{},{x:c,y:r})))};function M(){t(O(Object(l.a)(Object(l.a)({},E),{},{text:B}))),P()}function P(){R(void 0),L("")}return Object(i.jsxs)("div",{ref:n,className:"background-grid",children:[Object(i.jsxs)(s.d,{width:x,height:o,children:[Object(i.jsxs)(s.b,{onDblClick:function(e){var n=e.evt,a=n.layerX,c=n.layerY;t(h({x:a-=50,y:c-=50,text:H})),function(){var e=V[V.indexOf(H)+1];e&&T(e)}()},onClick:P,children:[Object(i.jsx)(s.c,{x:0,y:0,width:x,height:o}),0===e.length&&Object(i.jsx)(s.e,{x:0,y:o/2-100,width:x,align:"center",text:"Double click anywhere to add a note",fontSize:50})]}),Object(i.jsx)(s.b,{children:e.map((function(e,t){return Object(i.jsxs)(s.a,{x:e.x,y:e.y,draggable:!0,onDragEnd:J.bind(null,e),onDblClick:function(){return R(e)},children:[Object(i.jsx)(s.c,{width:100,height:100,fill:"#ffeaa0",shadowBlur:2,stroke:"#9a8945",strokeWidth:1,cornerRadius:[12,0,12,0]}),Object(i.jsx)(s.e,{text:e.text,width:100,fontSize:12,align:"left",padding:7,wrap:"word"})]},"note-"+t)}))})]}),E&&Object(i.jsx)("form",{onSubmit:M,children:Object(i.jsx)("textarea",{defaultValue:E.text,onFocus:function(e){return e.target.select()},onChange:function(e){return L(e.target.value)},onKeyDown:function(e){switch(e.key){case"Enter":M();break;case"Escape":P()}},className:"absolute",autoFocus:!0,style:{top:E.y+w,left:E.x+S,padding:"7px",paddingRight:"5px",fontSize:"11.5px",lineHeight:"12px",width:"100px",height:"100px",background:"#ffeaa0",borderRadius:"12px 0 12px 0",borderColor:"#9a8945",overflowWrap:"break-word",boxShadow:"0 3px 7px black",overflow:"hidden",resize:"none"}})})]})},m=n(45);n(100),n(101);var w=function(){var e=Object(u.c)(g),t=Object(u.b)(),n=Object(a.useState)(null),c=Object(d.a)(n,2),r=(c[0],c[1],Object(a.useState)(null)),o=Object(d.a)(r,2),s=(o[0],o[1],{flex:1,minWidth:130,editable:!0,resizable:!0,newValueHandler:function(e){var n=e.column.colId,a=e.data.id,c=(e.oldValue,e.newValue),r={};return r[n]=c,t(O(Object(l.a)({id:a},r))),!0}});return Object(i.jsxs)("div",{children:[e.length?Object(i.jsx)("div",{className:"ag-theme-alpine",style:{height:400,width:600},children:Object(i.jsx)(m.AgGridReact,{immutableData:!0,rowData:e,getRowNodeId:function(e){return e.id},columnDefs:[{field:"text"},{field:"x",editable:!1},{field:"y",editable:!1}],defaultColDef:s,getContextMenuItems:function(e){if(!e.node)return[];var t=e.node.data.id,n={name:"Delete",action:function(){return x(t)}},a={name:"New",action:function(){return h({x:10,y:10,text:"whatevs"})}};return e.node.data.file?[n]:[a,n]}})}):null,Object(i.jsx)("button",{className:"bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white my-2 ml-2 py-2 px-4 border border-blue-500 hover:border-transparent rounded","aria-label":"Add Note",onClick:function(){return t(h({id:e.length,x:20,y:20,text:"Double click me to edit"}))},children:"+ Add Note..."})]})};var y=function(){return Object(i.jsx)("div",{className:"h-screen",children:Object(i.jsx)("main",{className:"h-full",children:Object(i.jsxs)("div",{className:"flex h-full",children:[Object(i.jsx)("div",{className:"w-1/4 overflow-x-scroll",children:Object(i.jsx)(w,{})}),Object(i.jsx)("div",{className:"w-3/4 h-full border border-solid border-gray-300  ",children:Object(i.jsx)(p,{})})]})})})};var N=function(){return Object(i.jsx)(y,{})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))},S=Object(b.a)({reducer:{board:v}});o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(u.a,{store:S,children:Object(i.jsx)(N,{})})}),document.getElementById("root")),k()},49:function(e,t,n){},50:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.957a1c09.chunk.js.map